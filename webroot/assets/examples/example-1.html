<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Examples with Open-Source APIs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/assets/bootstrap/css/bootstrap.min.css?built_at=1398812166" rel="stylesheet"/>
    <link href="/assets/bootstrap/css/bootstrap-responsive.min.css?built_at=1398812166" rel="stylesheet"/>
    <link href="/assets/jquery-ui/css/jquery-ui.css?built_at=1398812166" rel="stylesheet"/>
    <link href="/css/contrail.jquery.ui.css?built_at=1398812166" rel="stylesheet"/>

    <!-- Start dev_env -->
    <link rel="stylesheet" href="/assets/font-awesome/css/font-awesome.min.css?built_at=1395882185"/>
    <!-- End dev_env -->

    <!--Fonts-->
    <!-- Start dev_env -->
    <link rel="stylesheet" href="/assets/fonts-opensans/openSans.css?built_at=1395882185"/>
    <!-- End dev_env -->

    <!--D3 Styles-->
    <!-- Start dev_env -->
    <link href="/css/nv.d3.contrail.css?built_at=1395882185" rel="stylesheet">
    <!-- End dev_env -->

    <link rel="stylesheet" href="/assets/select2/styles/select2.css" />
    <link rel="stylesheet" href="/assets/datetimepicker/styles/jquery.datetimepicker.css" />
    <link rel="stylesheet" href="/assets/slickgrid/styles/slick.grid.css">

    <!--Contrail Styles-->
    <link rel="stylesheet" href="/css/contrail.layout.css?built_at=1395882185" />
    <link rel="stylesheet" href="/css/contrail.elements.css?built_at=1395882185" />
    <link rel="stylesheet" href="/css/contrail.responsive.css?built_at=1395882185" />
    <link rel="stylesheet" href="/css/contrail.custom.css?built_at=1395882185" />

</head>

<body data-spy="scroll" data-target=".bs-docs-sidebar">
<div class="container">

<div class="row">
<div class="span3 bs-docs-sidebar">
    <ul class="nav nav-list bs-docs-sidenav">
        <li><a href="#form-elements"><i class="icon-chevron-right"></i> Form Elements</a></li>
        <li><a href="#slickgrid"><i class="icon-chevron-right"></i> SlickGrid</a></li>
        <li><a href="#hbars-knockout"><i class="icon-chevron-right"></i> Handlebars & Knockout</a></li>
        <li><a href="#jqtabs"><i class="icon-chevron-right"></i> jQuery Tabs</a></li>
        <li><a href="#jqvalidate"><i class="icon-chevron-right"></i> jQuery Validation</a></li>
    </ul>
</div>

<div class="span9">
<section id="form-elements">
    <div class="page-header">
        <h2>Form Elements</h2>
    </div>
    <div class="row-fluid">
        <div class="span4">
            <h5>Drop-down with Search</h5>
            <select id="e1" class= "span12">
                <option value="">Select one...</option>
                <option value="ActionScript">ActionScript</option>
                <option value="AppleScript">AppleScript</option>
                <option value="Asp">Asp</option>
                <option value="BASIC">BASIC</option>
                <option value="C">C</option>
                <option value="C++">C++</option>
                <option value="Clojure">Clojure</option>
                <option value="COBOL">COBOL</option>
                <option value="Ruby">Ruby</option>
                <option value="Scala">Scala</option>
                <option value="Scheme">Scheme</option>
            </select>
            <input id="e1-val" type="hidden" value="Select.." />
        </div>
        <div class="span4">
            <h5>Drop-down w/o Search</h5>
            <div class="row-fluid">
                <input id="e2" class= "span12" />
            </div>
        </div>
        <div class="span4">
            <h5>Multiple Selections</h5>
            <div class="row-fluid">
                <input  id="e3" class= "span12"/>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span4">
            <h5>Ajax data</h5>
            <input id="ajax-data" class= "span12"/>
        </div>
        <div class="span4">
            <h5>Date-Time Picker</h5>
            <input type="text" id="datetimepicker1" class= "span12" /></input>
        </div>
        <div class="span4">
            <h5>jQuery Numeric TextBox</h5>
            <input id="spinner" type="text" class= "span12" />
        </div>
    </div>
    <div class="row-fluid">
        <div class="span4">
            <h5>Auto Complete</h5>
            <input id="tags" class="span12">
        </div>
        <div class="span4">
            <h5>Combo Box</h5>
            <input id="contrail-combobox" class="span12" />
        </div>
    </div>
    <div class="row-fluid">
        <h5>2 Way Multi Select</h5>
        <div id="contrail2WayMultiselect"></div>
    </div>
</section>
<section id="slickgrid">
    <div class="bs-docs-example">
        <div class="page-header">
            <h2>SlickGrid</h2>
        </div>

        <div id="basic-grid"></div>
        <br/>
        <br/>
        <div id="dataview-grid"></div>
        <br/>
        <br/>
        <div id="details-grid"></div>
        <br/>
        <br/>
                    <div id="parser-grid"></div>
                    <br/>
                    <br/>
        <div class="row-fluid">
                    <span id="btnDeleteIPAM" class="pull-right">
                    <i class="icon-minus"></i>
                    </span>
        </div>
        <div id="ipam-grid"></div>
    </div>
    <br>
</section>
<section id="hbars-knockout">
    <div class="bs-docs-example">
        <div class="page-header">
            <h2>Handlebars & Knockout</h2>
        </div>
        <div id="handlebars-example"></div>
        <script type="text/x-handlebars-template" id="handlebars-template">
            <div id="{{prefix}}-container">
                <div>
                    <form id="{{prefix}}-form" onsubmit="return false;">
                        {{#each fields}}
                        {{#IfCompare @index 0 operator="%3"}}
                        {{#IfCompare @index 0 operator="!="}}
                </div>
                <div class="row-fluid">
                    {{else}}
                    <div class="row-fluid">
                        {{/IfCompare}}
                        {{else}}
                        {{#IfCompare @index 0 operator="=="}}
                        <div class="row-fluid">
                            {{/IfCompare}}
                            {{/IfCompare}}
                            <div class="span4">
                                <input type="checkbox" name="{{this.name}}" value="{{this.value}}" data-bind="checked: checkedFields" class="ace-input"/>
                                <span class="ace-lbl"> {{this.name}}</span>
                            </div>
                            {{#IfCompare @index array.length operator="lessByOne"}}
                        </div>
                        {{/IfCompare}}

                        {{/each}}
                        </form>
                    </div>
                </div>
            </div>
        </script>
    </div>
</section>
<section id="jqtabs">
    <div class="bs-docs-example">
        <div class="page-header">
            <h2>jQuery Tabs</h2>
        </div>
        <div class="bs-docs-example">
            <div id="tabs">
                <ul>
                    <li><a href="#tabs-1">Arsenal FC</a></li>
                    <li><a href="#tabs-2">Manchester Utd FC</a></li>
                    <li><a href="#tabs-3">Chelsea</a></li>
                </ul>
                <div id="tabs-1">
                    <p> Arsenal Football Club is an English Premier League football club based in Holloway, London. One of the most successful clubs in English football, it has won 13 First Division and Premier League titles and 10 FA Cups.</p>
                </div>
                <div id="tabs-2">
                    <p>Manchester United Football Club is an English professional football club, based in Old Trafford, Greater Manchester, that plays in the Premier League.</p>
                </div>
                <div id="tabs-3">
                    <p>Chelsea Football Club is an English football club based in Fulham, London. Founded in 1905, they play in the Premier League and have spent most of their history in the top tier of English football.</p>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="jqvalidate">
    <div class="bs-docs-example">
        <div class="page-header">
            <h2>jQuery Validation</h2>
        </div>
        <h4>Login Form</h4>

        <div>
            <form action="" id="login">
                <div class="row-fluid" style="padding: 15px 0;">
                    <div class="span1">
                        <label for="email"><span>Email</span></label>
                    </div>
                    <div class="span3">
                        <input id="email" name="email" class="text " type="text"/>
                    </div>
                    <div class="span3 errorLoc"></div>
                </div>
                <div class="row-fluid" style="padding: 15px 0;">

                    <div class="span1">
                        <label for="password"><span>Password</span></label>
                    </div>
                    <div class="span3">
                        <input id="password" name="password" type="password" class="text "/>
                    </div>
                    <div class="span3 errorLoc"></div>
                </div>
                <div class="row-fluid" style="padding: 15px 0;">
                    <div class="span3">
                        <input type="submit" id="submit-btn" name="submit-btn"/>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>
</div>
</div>
</div>
<br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br>

<!--JQuery Scripts-->
<!-- Start dev_env -->
<script src="/assets/jquery/js/jquery-1.8.3.min.js?built_at=1395882185"></script>
<!-- End dev_env -->
<!--
<script src="/assets/jquery/assets/js/jquery-1.9.1.min.js?built_at=1395882185"></script>
-->
<!-- Start dev_env -->
<script src="/assets/jquery/js/jquery.xml2json.js?built_at=1395882185"></script>
<script src="/assets/jquery/js/jquery.ba-bbq.min.js?built_at=1395882185"></script>
<script src="/assets/jquery/js/jquery.timer.js?built_at=1395882185"></script>
<script src="/assets/jquery-ui/js/jquery-ui.js?built_at=1395882185"></script>
<script src="/assets/jquery/js/jquery.ui.touch-punch.min.js?built_at=1395882185"></script>
<!-- End dev_env -->

<!--Bootstrap Scripts-->
<!-- Start dev_env -->
<script src="/assets/bootstrap/js/bootstrap.min.js?built_at=1395882185"></script>
<!-- End dev_env -->

<!--D3 Scripts-->
<!-- Start dev_env -->
<script src="/assets/d3/js/d3.js?built_at=1395882185"></script>
<script src="/assets/nvd3/js/nv.d3.js?built_at=1395882185"></script>
<script src="/assets/crossfilter/js/crossfilter.min.js?built_at=1395882185"></script>
<!-- End dev_env -->

<!--Utils Scripts-->
<!-- Start dev_env -->
<script src="/js/jsonpath-0.8.0.js?built_at=1395882185"></script>
<script src="/js/xdate.js?built_at=1395882185"></script>
<!-- End dev_env -->

<!--Contrail Scripts-->
<!-- Start dev_env -->
<script src="/js/contrail-common.js"></script>
<!-- End dev_env -->

<script src="/assets/jquery/js/jquery.validate.js"></script>
<script src="/assets/handlebars/handlebars-v1.3.0.js"></script>
<script src="/js/handlebars-utils.js"></script>
<script src="/assets/knockout/knockout-3.0.0.js"></script>
<script src="/assets/select2/js/select2.min.js"></script>
<script src="/js/select2-utils.js"></script>
<script src="/assets/slickgrid/js/jquery.event.drag-2.2.js"></script>
<script src="/assets/slickgrid/js/jquery.json-2.3.min.js"></script>
<script src="/assets/slickgrid/js/jquery.dropkick-1.0.0.js"></script>
<script src="/assets/slickgrid/js/slick.core.js"></script>
<script src="/assets/slickgrid/js/slick.grid.js"></script>
<script src="/assets/slickgrid/js/slick.dataview.js"></script>
<script src="/assets/slickgrid/js/slick.enhancementpager.js"></script>
<script src="/js/slickgrid-utils.js"></script>
<script src="/js/contrail-elements.js"></script>
<script src="/js/config_global.js"></script>
<script src="/assets/datetimepicker/js/jquery.datetimepicker.js"></script>
<script src="/assets/moment/moment.min.js"></script>
<script src="/assets/2way-multiselect/js/multiselect.js"></script>

<script>

$(document).ready(function(){
    $( "#e1" ).contrailCombobox();
// ContrailDropdown with array data
//var data = [{id:0, text:'C'}, {id:1, text:'W'},{id:2, text:'N'}, {id:3, text:'N'}, {id:4, text:'Hasdfghjk'}];
//$("#e2").contrailDropdown({dropdownCssClass : 'select2-large-width'});
// var y = $('#e2').data('contrailDropdown');
//y.setData(data);
// Dont specify the dropdownCssClass if you dont need to specify custom width for DropDown
// contrailDropdown with remote data source example
    $('#e2').contrailDropdown({
        dataTextField:"name",
        dataValueField: "value",
        dataSource:{
            type: 'remote',
            url:'data/data1.json'
        },
        // called on change event
        change: contrailDropdownChangeHandler
    });
    function contrailDropdownChangeHandler() {};

    var option = {
        data: [{id:0, text:'California'}, {id:1, text:'Washington'},{id:2, text:'New york'}, {id:3, text:'Nevada'}, {id:4, text:'New Jersey'}]
    }
    var multiselect= $("#e3").contrailMultiselect(option);

    function ExampleViewModel() {
        this.checkedFields = ko.observableArray(['1', '2']);
    }
    var hbarsTemplate = Handlebars.compile($('#handlebars-template').html()),
            templateData = {prefix: 'hbar',
                fields: [
                    {name: 'Field 1', value: '1'},
                    {name: 'Field 2', value: '2'},
                    {name: 'Field 3', value: '3'},
                    {name: 'Field 4', value: '4'},
                    {name: 'Field 5', value: '5'},
                    {name: 'Field 6', value: '6'}
                ]},
            viewModel = new ExampleViewModel(),
            hbarsHTML = hbarsTemplate(templateData);
    $('#handlebars-example').html(hbarsHTML);
    ko.applyBindings(viewModel, document.getElementById('handlebars-example'));
    viewModel.checkedFields.push("6");

    function getGridData(count, startIndex){
        var data = [];
        var startTime = 1392739617269614 + startIndex*1000000;
        for (var i = 0; i < count; i++) {
            data.push({
                "index" : startIndex + i,
                "Level" : 6,
                "MessageTS" : startTime + 1000000,
                "Messagetype" : "discServiceLog",
                "ModuleId" : "DiscoveryService",
                "Source" : "nodec52",
                "Type" : 1
            });
        }
        return data;
    };

    var gridData = getGridData(20, 1);

	var gridColumns = [ {
		id : "index",
		field : "index",
		name : "Index",
		width : 100,
		sortable : {
			sortBy: 'formattedValue'
		},
		formatter : function(r, c, v, cd, dc) {
			return (21-dc.index) + ' - original: ' + dc.index;
		}
	}, {
		id : "MessageTS",
		field : "MessageTS",
		name : "Time",
		width : 300,
		formatter : function(r, c, v, cd, dc) {
			return new Date(dc.MessageTS / 1000);
		},
		events: {
			onClick: function(e,dc){
				console.log(new Date(dc.MessageTS / 1000));
			}
		},
		sortable : true
	}, {
		id : "Source",
		field : "Source",
		name : "Source",
		width : 190,
		sortable : true,
		cssClass: 'cell-hyperlink-blue'

	}, {
		id : "Messagetype",
		field : "Messagetype",
		name : "Message Type",
		width : 190,
		sortable : true
	}, {
		id : "ModuleId",
		field : "ModuleId",
		name : "ModuleId",
		width : 190,
		sortable : true

	}];
	$("#basic-grid").contrailGrid({
		header : {
			title : {
				text : 'Grid with Client Side Pagination',
				cssClass : 'blue',
				icon : 'icon-list',
				iconCssClass : 'blue'
			}
		},
		columnHeader : {
			columns : gridColumns
		},
		body : {
			options : {
				checkboxSelectable: true
			},
			dataSource : {
				data : gridData
			},
			events: {
				onClick: function(e,dc){
					console.log(new Date(dc.MessageTS / 1000));
				}
			}
		},
		footer : {
			pager : {
				options : {
					pageSize : 5,
					pageSizeSelect : [ 5, 10, 50 ]
				}
			}
		}
	});
	
	$("#details-grid").contrailGrid({
		header : {
			title : {
				text : 'Grid with Detail Template',
				cssClass : 'blue',
				icon : 'icon-list',
				iconCssClass : 'blue'
			},
			customControls: ['<a onclick=doSomething(); ><i class="icon-trash"></i></a>',
 			                '<a onclick=doSomething(); title="Create"><i class="icon-plus"></i></a>']
		},
		columnHeader : {
			columns : gridColumns
		},
		body : {
			options : {
				gridHeight : 300,
				autoHeight : false,
				checkboxSelectable: true,
				detail: {
					template: '<p>Detail : {{index}} : {{Source}}</p>',
					onInit: function(e,dc) {
						console.log('Detail Init: ');
						console.log(dc);
						setTimeout(function(){
							$(e.detailRow).append('<p>Appended some content dynamically</p>');
							$(e.detailRow).append('<p>Appended some content dynamically</p>');
							$("#details-grid").data('contrailGrid').adjustDetailRowHeight(dc.id);
						},1000);
					},
					onExpand: function(e,dc) {
						console.log('Detail Expand: ');
						console.log(dc);
					},
					onCollapse: function(e,dc) {
						console.log('Detail Collapse: ');
						console.log(dc);
					}
				}
			},
			dataSource : {
				data : gridData
			}
		},
		footer : false
	});

    var contrailDataView = new ContrailDataView();

    contrailDataView.onPagingInfoChanged.subscribe(function (e, args) {
		console.log('onPagingInfoChanged event fired');
    });

    contrailDataView.onRowCountChanged.subscribe(function (e, args) {
		console.log('onRowCountChanged event fired');
    });

    contrailDataView.onRowsChanged.subscribe(function (e, args) {
		console.log('onRowsChanged event fired');
    });

    contrailDataView.onUpdateData.subscribe(function(){
        console.log("onUpdateData event fired via dataView");
    });

    contrailDataView.setData(gridData);

    $("#dataview-grid").contrailGrid({
        header : {
            title : {
                text : 'Grid from given DataSource',
                cssClass : 'blue',
                icon : 'icon-list',
                iconCssClass : 'blue'
            }
        },
        columnHeader : {
            columns : gridColumns
        },
        body : {
            options : {
                rowHeight : 30,
                autoHeight : true,
                checkboxSelectable: true,
                lazyLoading: true
            },
            dataSource : {
                dataView : contrailDataView,
                events: {
                    onUpdateDataCB: function() {
                        console.log("onUpdateData event fired via grid");
                    }
                }
            }
        },
        footer : {
            pager : {
                options : {
                    pageSize : 5,
                    pageSizeSelect : [ 5, 10, 50 ]
                }
            }
        }
    });

    var parserGridColumns = [ {
        id : "name",
        field : "name",
        name : "Name",
        width : 200,
        sortable : true
    }];

    $("#parser-grid").contrailGrid({
        header : {
            title : {
                text : 'Grid with Data Parser Callback',
                cssClass : 'blue',
                icon : 'icon-list',
                iconCssClass : 'blue'
            }
        },
        columnHeader : {
            columns : parserGridColumns
        },
        body : {
            options : {
                rowHeight : 30,
                autoHeight : true,
                checkboxSelectable: true
            },
            dataSource : {
                remote: {
                    ajaxConfig: {
                        url: "/api/admin/monitor/infrastructure/vrouters/cached-generators",
                        type: "GET"
                    },
                    dataParser: function (response) {
                        return response['data'];
                    }
                }
            }
        },
        footer : {
            pager : {
                options : {
                    pageSize : 5,
                    pageSizeSelect : [ 5, 10, 50 ]
                }
            }
        }
    });
	
    // ipamGrid Prototype
    var ipamData = [];
    ipamData.push({"IPBlock":'1.1.1.1/11', "IPAM":"default-ipam", "Gateway":'1.31.255.251'});
    ipamData.push({"IPBlock":'1.1.1.1/11', "IPAM":"default-domain:demo:default-ipam", "Gateway":'1.31.255.252'});
    ipamData.push({"IPBlock":'2.2.2.2/22', "IPAM":"default-ipam", "Gateway":'1.31.255.253'});
    ipamData.push({"IPBlock":'2.2.2.2/22', "IPAM":"default-domain:demo:default-ipam", "Gateway":'1.31.255.254'});

    function compare(a,b) {
        if (a.IPAM < b.IPAM)
            return -1;
        if (a.IPAM > b.IPAM)
            return 1;
        return 0;
    }

    ipamData.sort(compare);

    $('#ipam-grid').contrailGrid({
        header: false,
        columnHeader : {
            columns : [
                {
                    id: "IPAM",
                    field: "IPAM",
                    name: "IPAM",
                    formatter: function(r, c, v, cd, dc) {
                        if(r>0){
                            var prevDc = $('#ipam-grid').data('contrailGrid')._dataView.getItem(r-1);
                            return (prevDc.IPAM == dc.IPAM) ? '' : dc.IPAM;
                        }
                        return dc.IPAM;
                    }
                },
                {
                    id: "IPBlock",
                    field: "IPBlock",
                    name: "IP Block"
                },
                {
                    id: "Gateway",
                    field: "Gateway",
                    name: "Gateway"
                }]
        },
        body : {
            options : {
                rowSelectable: true,
                forceFitColumns: true
            },
            dataSource : {
                data : ipamData
            }
        }
    });

    var ipamGrid = $('#ipam-grid').data('contrailGrid');

    $('#btnDeleteIPAM').on('click', function(){
        var selectedRow = ipamGrid.getSelectedRow();
        ipamGrid._dataView.deleteDataByIds([selectedRow.id]);
    });

    function doSomething(){
        console.log("Something Clicked");
    }
    $('#datetimepicker1').contrailDateTimePicker({
        format: 'M d, Y h:i:s A'
    });


    $("#login").validate({
        errorClass: 'jqInvalid',
        rules: {
            email: "required",
            password: "required"
        },
        messages: {
            email:{ required: '<i class="icon-warning-sign"></i> Email Address Required'},
            password:{ required: '<i class="icon-warning-sign"></i> Password Required'}
        },
        errorPlacement: function(label, element) {
            label.appendTo(element.parents('.row-fluid').find('.errorLoc'));
        }
    });

    var ajaxData = [];
    $.ajax({
        url: "data/data.json",
        dataType: "json",
        async: false,
        success: function( data ) {
            $.each(data, function(key,val){
                ajaxData.push(String(val.text));
            })
        }
    });

    $( "#ajax-data" ).contrailAutoComplete({
        source : ajaxData
    });

    $( "#contrail-combobox" ).contrailCombobox({
        dataTextField: 'text',
        dataValueField: 'id',
        dataSource: {
            // if remote is specified then data will be fetched from remote source thorugh Ajax call
            // if remote is NOT specified then default options will be shown in the combo box dropdown
            type: 'remote',
            url: 'data/data.json'
        }
    });
    function parseHandler(data){
        console.log("In the parse Handler function");
        return data;
    }

    $( "#spinner" ).contrailNumericTextbox();

    $( "#tabs" ).contrailTabs();

    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).contrailAutoComplete({
        source: availableTags
    });

    $('#contrail2WayMultiselect').contrail2WayMultiselect({
        beforeMoveAllToRight: validatorMS,
        leftTitle: 'Left',
        rightTitle: 'Right',
        sizeLeft: 8,
        sizeRight: 8
    });
    $('#contrail2WayMultiselect').data('contrail2WayMultiselect').setLeftData([
        {label: "bgp-1", value: "1"},
        {label: "bgp-2", value: "2"},
        {label: "bgp-3", value: "3"}
    ]);

    function validatorMS(){
        console.log("In the validator function for contrail2WayMultiselect");
        return true;
    }

    for (var counter = 0; counter < 5; counter++) {
        if(counter == 4) {
            window.setTimeout(function() {
                var dvGrid = $('#dataview-grid').data('contrailGrid');
                dvGrid.removeGridLoading();
            }, 5000 * (counter + 1));
        } else {
            window.setTimeout(function() {
                contrailDataView.addData(getGridData(5, contrailDataView.getLength()));
            }, 5000 * (counter + 1));
        }
    }
});
</script>

</body>
</html>
